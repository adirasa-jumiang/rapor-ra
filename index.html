<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View Rapor Online - RA ADIRASA</title>
    <link rel="icon" type="image/png" href="ADIRASA.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #17dc05 0%, #2f02f9 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .search-box {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }
        
        .search-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-group label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
        }
        
        .form-group input {
            padding: 12px 15px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .search-btn {
            grid-column: 1 / -1;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .search-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .search-btn:active {
            transform: translateY(0);
        }
        
        .result-section {
            display: none;
        }
        
        .rapor-container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        
        .rapor-header {
            background: linear-gradient(135deg, #2c5aa0 0%, #3a6bc0 100%);
            color: white;
            padding: 25px;
            text-align: center;
        }
        
        .rapor-header h2 {
            font-size: 1.8rem;
            margin-bottom: 10px;
        }
        
        .rapor-content {
            padding: 25px;
        }
        
        .student-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .info-group {
            display: flex;
            flex-direction: column;
        }
        
        .info-label {
            font-weight: 600;
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }
        
        .info-value {
            font-size: 1rem;
            color: #333;
        }
        
        .section-title {
            font-size: 1.3rem;
            color: #2c5aa0;
            margin: 25px 0 15px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid #e1e5e9;
        }
        
        .attendance-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .attendance-item {
            text-align: center;
            padding: 15px;
            border-radius: 8px;
            color: white;
            font-weight: 600;
        }
        
        .attendance-ijin { background: #27ae60; }
        .attendance-sakit { background: #f39c12; }
        .attendance-alpha { background: #e74c3c; }
        .attendance-total { background: #3498db; }
        
        .eval-box {
            border: 2px solid;
            border-radius: 8px;
            margin: 15px 0;
            overflow: hidden;
        }
        
        .eval-header {
            padding: 12px;
            color: white;
            font-weight: bold;
            text-align: center;
        }
        
        .eval-content {
            padding: 15px;
            background: white;
            min-height: 60px;
        }
        
        .signature-section {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 40px;
            text-align: center;
        }
        
        .signature-box {
            padding: 15px;
        }
        
        .signature-line {
            margin-top: 60px;
            border-top: 1px solid #333;
            padding-top: 10px;
        }
        
        .back-btn {
            background: #95a5a6;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
        }
        
        .back-btn:hover {
            background: #7f8c8d;
        }
        
        .error-message {
            background: #e74c3c;
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            margin-bottom: 20px;
            display: none;
        }
        
        .loading {
            text-align: center;
            padding: 20px;
            display: none;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @media (max-width: 768px) {
            .search-form {
                grid-template-columns: 1fr;
            }
            
            .student-info {
                grid-template-columns: 1fr;
            }
            
            .attendance-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .signature-section {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }
        
        .footer {
            text-align: center;
            color: white;
            margin-top: 30px;
            opacity: 0.8;
        }

        /* menu kiri */
            .wrapper {
      display: flex;
      transition: transform 0.3s ease;
    }

    /* Sidebar */
    .sidebar {
      width: 250px;
      height: 100vh;
      background-color: #333;
      color: white;
      padding: 1em;
      position: fixed;
      top: 0;
      left: -280px;
      z-index: 1000;
      transition: left 0.3s ease;
      text-align: left;
    }

    .sidebar.open {
      left: 0;
    }

    .sidebar h2 {
      color: #fff;
    }

    .sidebar a {
      display: block;
      color: #ccc;
      padding: 10px 0;
      text-decoration: none;
    }

    .sidebar a:hover {
      color: #fff;
    }

    /* Overlay (untuk HP) */
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.3);
      z-index: 999;
      display: none;
    }

    .overlay.active {
      display: block;
    }

    .menu-btn {
      position: fixed;
      top: 1rem;
      left: 1rem;
      font-size: 24px;
      cursor: pointer;
      z-index: 1100;
      background: #fff;
      padding: 5px 10px;
      border-radius: 5px;
    }
    </style>
</head>
<body>
  <div class="menu-btn" onclick="toggleSidebar()">‚ò∞</div>

  <div class="sidebar" id="sidebar">
    <center><img src="ADIRASA.png" width="70px" height="70px" style="border-radius: 50%; border-color: white; border-style: solid;"></center><hr>
    <h2>Menu</h2><hr>
    <a href="index.html">Beranda</a>
    <a href="master_rapor.html">Form Rapor</a>
    <a href="https://ra-adirasa.blogspot.com/">R.A. Adirasa</a>
    <a href="help.html">Cara Pakai</a>
    <a href="about.html">Tentang Aplikasi</a>
  </div>

  <div class="overlay" id="overlay" onclick="toggleSidebar()"></div>

    <div class="container">
        <div class="header">
            <img src="ADIRASA.png" width="80px" height="80px"><h1>üìö RA ADIRASA</h1>
            <p>Sistem View Rapor Online - Cek Hasil Belajar Siswa</p>
        </div>
        
        <div class="search-box">
            <div class="error-message" id="errorMessage">
                Data tidak ditemukan. Silakan periksa kembali Nama dan NIS Lokal.
            </div>
            
            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>Sedang mencari data rapor...</p>
            </div>
            
            <form class="search-form" id="searchForm">
                <div class="form-group">
                    <label for="namaSiswa">Nama Lengkap Siswa</label>
                    <input type="text" id="namaSiswa" placeholder="Masukkan nama lengkap siswa" required>
                </div>
                
                <div class="form-group">
                    <label for="nisLokal">NIS Lokal</label>
                    <input type="text" id="nisLokal" placeholder="Masukkan NIS Lokal" required>
                </div>
                
                <button type="submit" class="search-btn">
                    üîç Cari Rapor
                </button>
            </form>
        </div>
        
        <div class="result-section" id="resultSection">
            <div class="rapor-container">
                <div class="rapor-header">
                    <h2>LAPORAN PERKEMBANGAN ANAK</h2>
                    <p id="schoolInfo">RA ADIRASA - Desa Tanjung, Kec. Pademawu</p>
                    <p id="tahunSemester">Tahun Ajaran - Semester -</p>
                </div>
                
                <div class="rapor-content" id="raporContent">
                    <!-- Content will be populated by JavaScript -->
                </div>
            </div>
            
            <button class="back-btn" onclick="showSearchForm()">
                ‚Üê Kembali Pencarian
            </button>
        </div>
    </div>
    
    <div class="footer">
        <p>&copy; 2025 RA ADIRASA. Hak Cipta Dilindungi.</p>
    </div>

    <script>
        // Simpan data rapor (dalam implementasi nyata, ini akan di-load dari file JSON)
        let allStudentsData = {};
        
        // Load data dari file JSON
        async function loadRaporData() {
            try {
                // Untuk demo, kita akan coba load dari file JSON
                // Ganti URL dengan path ke file JSON Anda
                const response = await fetch('rapor_semua_siswa.json');
                if (response.ok) {
                    allStudentsData = await response.json();
                    console.log('Data rapor berhasil dimuat');
                }
            } catch (error) {
                console.log('Tidak dapat memuat file JSON, menggunakan data demo');
                // Fallback ke data demo
                allStudentsData = getDemoData();
            }
        }
        
        // Data demo untuk testing
        function getDemoData() {
            return {
                "demo_1": {
                    "id": "demo_1",
                    "namaSiswa": "Ahmad Fauzi",
                    "nisLokal": "RA2024001",
                    "tempatLahir": "Pamekasan",
                    "tanggalLahir": "2020-05-15",
                    "jenisKelamin": "Laki-Laki",
                    "kelompokUsia": "B (4-5 Tahun)",
                    "tahunAjaran": "2024/2025",
                    "semester": "I",
                    "jumlahIjin": 2,
                    "jumlahSakit": 1,
                    "jumlahAlpha": 0,
                    "namaAyah": "Budi Santoso",
                    "pendidikanAyah": "S1",
                    "pekerjaanAyah": "Guru",
                    "namaIbu": "Siti Aminah",
                    "pendidikanIbu": "D3",
                    "pekerjaanIbu": "Ibu Rumah Tangga",
                    "agamaBudipekerti": "Anak sudah mampu mengenal huruf hijaiyah dan doa harian dengan baik. Perilaku sopan santun sudah mulai terbentuk.",
                    "jatiDiri": "Mandiri dalam menyelesaikan tugas, percaya diri saat berbicara di depan kelas, dan mulai belajar bertanggung jawab.",
                    "literasi": "Sudah mampu mengenal huruf A-Z dan angka 1-20. Senang mendengarkan cerita dan mulai tertarik membaca buku bergambar.",
                    "profilPancasila": "Menunjukkan sikap gotong royong dalam kegiatan kelompok dan menghargai teman yang berbeda pendapat.",
                    "keagamaanBTQ": "Sudah hafal surat Al-Fatihah dan beberapa surat pendek. Mampu membaca iqro dengan lancar.",
                    "informasiPerkembangan": "Anak menunjukkan perkembangan yang baik dalam sosialisasi dan kemampuan kognitif. Perlu terus dilatih untuk meningkatkan konsentrasi.",
                    "refleksi1": "Kemampuan sosialisasi dan komunikasi sudah berkembang dengan baik",
                    "refleksi2": "Perlu meningkatkan kemampuan konsentrasi dalam menyelesaikan tugas",
                    "refleksi3": "Memberikan kegiatan yang melatih fokus dan konsentrasi di rumah",
                    "penandaOrtu": "Budi Santoso",
                    "penandaGuru": "Siti Khodijah, S.Pd",
                    "penandaKepala": "Drs. H. Muhammad Amin",
                    "tanggalRapor": "2024-12-20",
                    "foto": "",
                    "createdAt": "2024-01-15T10:00:00.000Z"
                },
                "demo_2": {
                    "id": "demo_2", 
                    "namaSiswa": "Siti Aisyah",
                    "nisLokal": "RA2024002",
                    "tempatLahir": "Pamekasan",
                    "tanggalLahir": "2020-08-20",
                    "jenisKelamin": "Perempuan",
                    "kelompokUsia": "B (4-5 Tahun)",
                    "tahunAjaran": "2024/2025",
                    "semester": "I",
                    "jumlahIjin": 1,
                    "jumlahSakit": 3,
                    "jumlahAlpha": 0,
                    "namaAyah": "Ahmad Hasan",
                    "pendidikanAyah": "SMA",
                    "pekerjaanAyah": "Wiraswasta",
                    "namaIbu": "Fatimah Zahra",
                    "pendidikanIbu": "SMA", 
                    "pekerjaanIbu": "Ibu Rumah Tangga",
                    "agamaBudipekerti": "Rajin beribadah dan sudah hafal doa sehari-hari. Sikap sopan santun sangat baik.",
                    "jatiDiri": "Anak yang kreatif dan ekspresif. Senang menari dan menyanyi di depan kelas.",
                    "literasi": "Mampu mengenal warna dan bentuk dengan baik. Senang kegiatan menggambar dan mewarnai.",
                    "profilPancasila": "Suka menolong teman dan menghargai perbedaan. Aktif dalam kegiatan kelompok.",
                    "keagamaanBTQ": "Hafalan surat pendek cukup baik. Mampu melafalkan bacaan sholat dengan benar.",
                    "informasiPerkembangan": "Perkembangan motorik halus sangat baik. Kreativitas dalam seni perlu terus dikembangkan.",
                    "refleksi1": "Kreativitas dan kemampuan seni berkembang sangat baik",
                    "refleksi2": "Perlu meningkatkan kemampuan mengenal huruf dan angka",
                    "refleksi3": "Melatih pengenalan huruf melalui permainan edukatif",
                    "penandaOrtu": "Ahmad Hasan",
                    "penandaGuru": "Siti Khodijah, S.Pd", 
                    "penandaKepala": "Drs. H. Muhammad Amin",
                    "tanggalRapor": "2024-12-20",
                    "foto": "",
                    "createdAt": "2024-01-15T10:00:00.000Z"
                }
            };
        }
        
        // Format tanggal
        function formatDate(idate) {
            if(!idate) return '';
            const d = new Date(idate);
            const opt = { day:'numeric', month:'long', year:'numeric' };
            return d.toLocaleDateString('id-ID', opt);
        }
        
        // Cari siswa berdasarkan nama dan NIS
        function findStudent(nama, nis) {
            const students = Object.values(allStudentsData);
            return students.find(student => 
                student.namaSiswa.toLowerCase() === nama.toLowerCase() && 
                student.nisLokal === nis
            );
        }
        
        // Tampilkan form pencarian
        function showSearchForm() {
            document.getElementById('searchForm').style.display = 'grid';
            document.getElementById('resultSection').style.display = 'none';
            document.getElementById('errorMessage').style.display = 'none';
            document.getElementById('namaSiswa').value = '';
            document.getElementById('nisLokal').value = '';
        }
        
        // Tampilkan hasil rapor
        function showRapor(student) {
            const totalHariMasuk = (student.jumlahIjin || 0) + (student.jumlahSakit || 0);
            
            document.getElementById('schoolInfo').textContent = 'RA ADIRASA - Desa Tanjung, Kec. Pademawu';
            document.getElementById('tahunSemester').textContent = 
                `Tahun Ajaran ${student.tahunAjaran || '-'} - Semester ${student.semester || '-'}`;
            
            const raporContent = document.getElementById('raporContent');
            raporContent.innerHTML = `
                <div class="student-info">
                    <div class="info-group">
                        <span class="info-label">Nama Lengkap</span>
                        <span class="info-value">${student.namaSiswa || ''}</span>
                    </div>
                    <div class="info-group">
                        <span class="info-label">NIS Lokal</span>
                        <span class="info-value">${student.nisLokal || ''}</span>
                    </div>
                    <div class="info-group">
                        <span class="info-label">Tempat, Tanggal Lahir</span>
                        <span class="info-value">${student.tempatLahir || ''}, ${formatDate(student.tanggalLahir)}</span>
                    </div>
                    <div class="info-group">
                        <span class="info-label">Jenis Kelamin</span>
                        <span class="info-value">${student.jenisKelamin || ''}</span>
                    </div>
                    <div class="info-group">
                        <span class="info-label">Kelompok / Usia</span>
                        <span class="info-value">${student.kelompokUsia || ''}</span>
                    </div>
                </div>
                
                <div class="section-title">Data Orang Tua / Wali</div>
                <div class="student-info">
                    <div class="info-group">
                        <span class="info-label">Nama Ayah</span>
                        <span class="info-value">${student.namaAyah || '-'}</span>
                    </div>
                    <div class="info-group">
                        <span class="info-label">Pendidikan Ayah</span>
                        <span class="info-value">${student.pendidikanAyah || '-'}</span>
                    </div>
                    <div class="info-group">
                        <span class="info-label">Pekerjaan Ayah</span>
                        <span class="info-value">${student.pekerjaanAyah || '-'}</span>
                    </div>
                    <div class="info-group">
                        <span class="info-label">Nama Ibu</span>
                        <span class="info-value">${student.namaIbu || '-'}</span>
                    </div>
                    <div class="info-group">
                        <span class="info-label">Pendidikan Ibu</span>
                        <span class="info-value">${student.pendidikanIbu || '-'}</span>
                    </div>
                    <div class="info-group">
                        <span class="info-label">Pekerjaan Ibu</span>
                        <span class="info-value">${student.pekerjaanIbu || '-'}</span>
                    </div>
                </div>
                
                <div class="section-title">Keaktifan Siswa</div>
                <div class="attendance-grid">
                    <div class="attendance-item attendance-ijin">
                        <div>Ijin</div>
                        <div style="font-size: 24px; margin-top: 5px;">${student.jumlahIjin || 0}</div>
                    </div>
                    <div class="attendance-item attendance-sakit">
                        <div>Sakit</div>
                        <div style="font-size: 24px; margin-top: 5px;">${student.jumlahSakit || 0}</div>
                    </div>
                    <div class="attendance-item attendance-alpha">
                        <div>Alpha</div>
                        <div style="font-size: 24px; margin-top: 5px;">${student.jumlahAlpha || 0}</div>
                    </div>
                    <div class="attendance-item attendance-total">
                        <div>Total Masuk</div>
                        <div style="font-size: 24px; margin-top: 5px;">${totalHariMasuk}</div>
                    </div>
                </div>
                
                <div class="section-title">Evaluasi Perkembangan Anak</div>
                
                <div class="eval-box" style="border-color:#3498db;">
                    <div class="eval-header" style="background:#3498db;">üïå AGAMA & BUDI PEKERTI</div>
                    <div class="eval-content">${student.agamaBudipekerti || '<em style="color:#666;">Belum ada evaluasi</em>'}</div>
                </div>
                
                <div class="eval-box" style="border-color:#e74c3c;">
                    <div class="eval-header" style="background:#e74c3c;">üåü JATI DIRI</div>
                    <div class="eval-content">${student.jatiDiri || '<em style="color:#666;">Belum ada evaluasi</em>'}</div>
                </div>
                
                <div class="eval-box" style="border-color:#27ae60;">
                    <div class="eval-header" style="background:#27ae60;">üìö LITERASI / MATEMATIKA / SAINS / SENI</div>
                    <div class="eval-content">${student.literasi || '<em style="color:#666;">Belum ada evaluasi</em>'}</div>
                </div>
                
                <div class="eval-box" style="border-color:#9b59b6;">
                    <div class="eval-header" style="background:#9b59b6;">üáÆüá© PROFIL PANCASILA & PROJEK</div>
                    <div class="eval-content">${student.profilPancasila || '<em style="color:#666;">Belum ada evaluasi</em>'}</div>
                </div>
                
                <div class="eval-box" style="border-color:#f39c12;">
                    <div class="eval-header" style="background:#f39c12;">üìñ MUATAN KEAGAMAAN & BTQ</div>
                    <div class="eval-content">${student.keagamaanBTQ || '<em style="color:#666;">Belum ada evaluasi</em>'}</div>
                </div>
                
                <div class="eval-box" style="border-color:#e67e22;">
                    <div class="eval-header" style="background:#e67e22;">üí° INFORMASI MENGENAI PERKEMBANGAN ANAK</div>
                    <div class="eval-content">${student.informasiPerkembangan || '<em style="color:#666;">Belum ada informasi tambahan mengenai perkembangan anak</em>'}</div>
                </div>
                
                <div class="section-title">Refleksi Orang Tua / Wali</div>
                <div style="margin-bottom: 15px;">
                    <strong>Apa yang sudah berkembang:</strong><br>
                    ${student.refleksi1 || '-'}
                </div>
                <div style="margin-bottom: 15px;">
                    <strong>Apa yang perlu dikembangkan:</strong><br>
                    ${student.refleksi2 || '-'}
                </div>
                <div style="margin-bottom: 15px;">
                    <strong>Langkah-langkah bantuan:</strong><br>
                    ${student.refleksi3 || '-'}
                </div>
                
                <div style="margin-top: 30px; text-align: right; font-size: 14px; color: #666;">
                    Pamekasan, ${student.tanggalRapor ? formatDate(student.tanggalRapor) : formatDate(new Date())}
                </div>
                
                <div class="signature-section">
                    <div class="signature-box">
                        <div>Orang Tua / Wali</div>
                        <div class="signature-line">${student.penandaOrtu || '________________'}</div>
                    </div>
                    <div class="signature-box">
                        <div>Guru Kelas</div>
                        <div class="signature-line">${student.penandaGuru || '________________'}</div>
                    </div>
                    <div class="signature-box">
                        <div>Kepala Madrasah</div>
                        <div class="signature-line">${student.penandaKepala || '________________'}</div>
                    </div>
                </div>
                
                <div style="margin-top: 30px; padding: 15px; text-align: center; font-size: 12px; color: #666; border-top: 1px solid #ddd;">
                    RA ADIRASA - Terdepan dalam Pendidikan Anak Usia Dini
                </div>
            `;
            
            document.getElementById('searchForm').style.display = 'none';
            document.getElementById('resultSection').style.display = 'block';
        }
        
        // Handle form submission
        document.getElementById('searchForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const nama = document.getElementById('namaSiswa').value.trim();
            const nis = document.getElementById('nisLokal').value.trim();
            
            if (!nama || !nis) {
                alert('Harap isi kedua field pencarian!');
                return;
            }
            
            document.getElementById('loading').style.display = 'block';
            document.getElementById('errorMessage').style.display = 'none';
            
            // Simulate loading delay
            setTimeout(() => {
                const student = findStudent(nama, nis);
                
                document.getElementById('loading').style.display = 'none';
                
                if (student) {
                    showRapor(student);
                } else {
                    document.getElementById('errorMessage').style.display = 'block';
                }
            }, 1000);
        });
        
        // Load data when page loads
        window.addEventListener('load', function() {
            loadRaporData();
        });
    </script>

<!-- menu -->
  <script>
    function toggleSidebar() {
      const sidebar = document.getElementById("sidebar");
      const overlay = document.getElementById("overlay");

      sidebar.classList.toggle("open");
      overlay.classList.toggle("active");
    }

  </script>
</body>
</html>
